
<div class="container h-100" >
    <div class="d-flex justify-content-center h-100">
        <div class="user_card">
            <div class="d-flex justify-content-center">
                <div class="brand_logo_container">
                    <img src="../../assets/icons/icon-2.png" width="150" height="150" class="brand_logo" alt="Logo">
                </div>
            </div>
            <div class="d-flex justify-content-center form_container">
                <!-- LOGIN FORM -->
                <!-- EMAIL -->
                <form [formGroup]="emailForm" style="width: 100%;" *ngIf="phase == 'emailSend'" (submit)="sendConfirmationEmail()">
                    <!-- EMAIL -->
                    <mat-form-field appearance="standard" class="mt-3">
                        <mat-label>Email</mat-label>
                        <input matInput formControlName="email">
                        <mat-icon matSuffix>email</mat-icon>
                        <mat-error *ngIf="utils.hasError(emailForm, 'email', 'required')">Email obrigatório
                        </mat-error>
                    </mat-form-field>

                    <div class="d-flex justify-content-end">
                        <div class="d-flex justify-content-center mt-3 mr-3">
                            <button type="submit" class="btn login_btn btn-primary" (click)="navigate('login')">Voltar</button>
                        </div>
                        <div class="d-flex justify-content-center mt-3">
                            <button type="submit" class="btn login_btn btn-primary">Enviar</button>
                        </div>
                    </div>
                </form>
                <!-- TOKEN -->
                <form [formGroup]="tokenForm" style="width: 100%;" *ngIf="phase == 'tokenConfirmation'" class="mt-4 mb-3" (submit)="confirmToken()">
                    <!-- EMAIL -->
                    <span>Foi enviado um token para seu email. Por favor nos informe abaixo para confirmar autenticidade</span>
                    <mat-form-field appearance="standard" class="mt-3">
                        <mat-label>Token</mat-label>
                        <input matInput formControlName="token">
                        <mat-icon matSuffix>security</mat-icon>
                        <mat-error *ngIf="utils.hasError(tokenForm, 'token', 'required')">Token obrigatório
                        </mat-error>
                    </mat-form-field>

                    <div class="d-flex justify-content-end">
                        <div class="d-flex justify-content-center mt-3 mr-3">
                            <button type="submit" class="btn login_btn btn-primary" (click)="phase = 'emailSend'">Voltar</button>
                        </div>
                        <div class="d-flex justify-content-center mt-3">
                            <button type="submit" class="btn login_btn btn-primary">Enviar</button>
                        </div>
                    </div>
                </form>
                <!-- PASSWORD -->
                <form [formGroup]="passwordForm" style="width: 100%;" *ngIf="phase == 'passwordChange'" class="mt-4 mb-3" (submit)="changePassword()">
                    <!-- EMAIL -->
                    <span>Escolha uma nova senha com no minimo 8 digitos</span>
                    <mat-form-field appearance="standard">
                        <mat-label>Senha</mat-label>
                        <input minlength="8" matInput type="password" formControlName="password">
                        <mat-icon mat-icon-button matSuffix>security</mat-icon>
                        <mat-error *ngIf="utils.hasError(passwordForm, 'password', 'required')">Senha obrigatória
                        </mat-error>
                        <mat-error *ngIf="utils.hasError(passwordForm, 'password', 'minlength')">Senha precisar no minimo 8 digitos
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field appearance="standard">
                        <mat-label>Confirmação de Senha</mat-label>
                        <input matInput type="password" formControlName="passwordConfirmation">
                        <mat-icon mat-icon-button matSuffix>security</mat-icon>
                        <mat-error *ngIf="utils.hasError(passwordForm, 'passwordConfirmation', 'notEquivalent')">
                            Senhas diferentes
                        </mat-error>
                        <mat-error *ngIf="utils.hasError(passwordForm, 'passwordConfirmation', 'required')">Confirmação obrigatória
                        </mat-error>
                    </mat-form-field>

                    <div class="d-flex justify-content-end">
                        <div class="d-flex justify-content-center mt-3 mr-3">
                            <button type="submit" class="btn login_btn btn-primary" (click)="phase = 'emailSend'">Voltar</button>
                        </div>
                        <div class="d-flex justify-content-center mt-3">
                            <button type="submit" class="btn login_btn btn-primary">Enviar</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>